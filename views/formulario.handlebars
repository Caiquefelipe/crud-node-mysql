
<main>
    <!-- Modal de Confirmação - Bootstrap -->
    <div class="modal fade" id="modalRemover" tabindex="-1" aria-labelledby="modalRemoverLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-gradient border-0 shadow-lg">
                <div class="modal-header border-0 bg-danger bg-opacity-10">
                    <h5 class="modal-title w-100 text-center text-danger fw-bold" id="modalRemoverLabel">⚠️ Remover Produto</h5>
                    <button type="button" class="btn-close" onclick="fecharModal()" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center py-4">
                    <p class="fs-6 text-muted">Deseja realmente remover esse produto?</p>
                    <p class="text-danger fw-bold">Essa ação não pode ser desfeita</p>
                </div>
                <div class="modal-footer border-0 d-flex gap-2 justify-content-center pb-4">
                    <button type="button" class="btn btn-secondary px-4" onclick="fecharModal()">Cancelar</button>
                    <button type="button" class="btn btn-danger px-4" onclick="confirmarRemocao()">Remover</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let urlRemover = '';

        function abrirModalRemover(codigo, imagem) {
            urlRemover = `/remover/${codigo}&${imagem}`;
            const modal = new bootstrap.Modal(document.getElementById('modalRemover'));
            modal.show();
        }

        function fecharModal() {
            const modal = bootstrap.Modal.getInstance(document.getElementById('modalRemover'));
            modal.hide();
        }

        function confirmarRemocao() {
            window.location.href = urlRemover;
        }
    </script>

    <div class="container">
        <div class="row">
            <div class="col-6 offset-3">

                {{!-- mensagens --}}
                {{>mensagens}}
                <form action="cadastrar" method="post" enctype="multipart/form-data">
                    <input type="text"   name="nome" class="form-control"placeholder="Nome do produto">
                    <input type="number" name="valor" class="form-control"placeholder="Valor do produto">
                    <input type="file"   name="imagem" class="form-control">
                    <input type="submit" class="btn btn-primary"value="Cadastrar">
                </form>
            </div>
    </div>

    {{!-- listagem de produtos --}}
    <div class="container">
        <div class="row">
            {{#each produtos}}
                   <div class="col- col-sm-6 col-md-4 col-lg-3">
                <div class="card">
                    <img src="../imagens/{{imagem}}">
                    <div class="textos">
                        <p>{{nome}}</p>
                        <p>R${{valor}}</p>
                    </div>
                    <a href="/formularioEditar/{{codigo}}" class="btn btn-warning">Alterar</a>
                    <a href="javascript:void(0)" class="btn btn-danger" onclick="abrirModalRemover('{{codigo}}', '{{imagem}}')">Remover</a>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</main>